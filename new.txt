#!/usr/bin/env bash

# Measure the start time
start_time=$(date +%s)

nohup python3 /opt/flink/usrlib/server1.py &

# Rest of the script...

# Measure the boot-up time for server1.py
server_boot_time=$(( $(date +%s) - start_time ))
echo "Server1.py boot-up time: $server_boot_time seconds"

# Measure the start time again
start_time=$(date +%s)

# Rest of the script...

args=("$@")
if [ "$1" = "help" ]; then
    # Help command

elif [ "$1" = "jobmanager" ]; then
    # Job Manager command

elif [ "$1" = ${COMMAND_STANDALONE} ]; then
    # Standalone Job Manager command

elif [ "$1" = ${COMMAND_HISTORY_SERVER} ]; then
    # History Server command

elif [ "$1" = "taskmanager" ]; then
    # Task Manager command

fi

args=("${args[@]}")

# Measure the boot-up time for Flink
flink_boot_time=$(( $(date +%s) - start_time ))
echo "Flink boot-up time: $flink_boot_time seconds"

# Running command in pass-through mode
exec $(drop_privs_cmd) "${args[@]}"
